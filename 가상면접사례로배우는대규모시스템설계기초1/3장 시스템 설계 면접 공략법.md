# 3장 시스템 설계 면접 공략법

시스템 설계 면접은 모호한 문제를 풀기 위해 협력하여 그 해결책을 찾아내는 과정에 대한 시뮬레이션

**평가항목**

- 기술적 측면
- 지원자가 협력에 적합한지
- 압박이 심한 상황을 잘 헤쳐나가는지
- 모호한 문제를 건설적으로 해결할 능력이 있는지
- 좋은 질문을 던질 능력이 있는지

평가에 부정적인 항목

- 설계의 순수성에 집착해 과도한 엔지니어링을 하는 것
- 완고함, 편협함

## 효과적 면접을 위한 4단계 접근법

### 1단계 문제 이해 및 설계 범위 확정

1단계에서 해야할 일

- 요구사항을 완전히 이해하지 않고 답을 내놓지 말 것
- 깊이 생각하고 질문하여 요구사항과 가정들을 분명히 할 것

**중요한 기술**

- 올바른 질문할 하는 것
- 적절한 가정을 하는 것
- 시스템 구축에 필요한 정보를 모으는 것

예를 들어 아래와 같은 질문을 할 수 있다.

- 구체적으로 어떤 기능들을 만들어야 하나?
- 제품 사용자 수는 얼마나 되나?
- 회사의 규모는 얼마나 빨리 커지리라 예상하나?
- 회사가 주로 사용하는 기술 스택은 무엇인가?

**예제**

**뉴스 피드 시스템** 설계를 설계할 때 할 수 있는 대화

- 모바일 앱과 웹 앱 가운데 어느 쪽을 지원해야 하나?
- 가장 중요한 기능은 무엇인가?
- 피드는 시간 역순으로 정렬되어야 하나? 포스트마다 가중치가 부여되어 가중치 순으로 정렬되어야 하나?
- 한 사용자는 최대 몇 명의 사용자와 친구를 맺을 수 있나?
- 사이트의 트래픽은 어느 정도인가?
- 피드에 이미지나 비디오도 올릴 수 있나?

### 2단계 개략적인 설계안 제시 및 동의 구하기

개략적인 설계안을 제시하고 면접관의 동의를 얻는 단계

- 설계안에 대한 최초 청사진을 제시하고 의견을 구하라.
- 화이트보드나 종이에 핵심 컴포넌트를 포함하는 다이어그램을 그려라.
- 시스템 규모에 관계된 제약사항들을 만족하는지를 개략적으로 계산하라.(이런 계산이 필요할 땐 면접관에게 미리 물어보라)
- 시스템의 구체적 사용 사례도 몇가지 살펴보라.

**예제**

뉴스 피드 시스템은 개략적으로 두 가지 플로우로 처리된다.

- 피드 발행: 사용자가 포스트를 올려 데이터베이스/캐시에 저장된다.
- 피드 생성(조회): 사용자는 친구들의 피드를 시간역순으로 정렬하여 조회한다.

### 3단계 상세 설계

위와 같은 단계를 거친 후 설계 대상 사이의 우선순위를 정한 후 상세 설계를 진행한다.

**예제**

피드 발행

- 인증, 처리율 제한을 둔다.
- 친구 id 목록 추천은 그래프 데이터베이스를 사용한다.
- 메시지 큐컴포넌트를 두어 포스팅을 전송하는 서버를 둔다.
- 전송된 포스팅은 뉴스 피드 캐시에 저장된다.
- 친구 데이터를 추출할 땐 캐시와 데이터베이스를 사용한다.

피드 생성(조회)

- 포스팅과 사용자 정보등을 캐시에서 가져온다.

### 4단계 마무리

- 시스템의 병목구간 또는 더 개선 가능 지점을 찾아내라 했을 때 개선할 부분이 없다고 하지 말 것.
- 설계를 다시 한번 요약해주는 것이 도움이 됨.
- 오류가 발생하면 무슨일이 생기는지 따져보면 흥미로울 것.
- 운영 이슈도 충분히 논의할만 함.
- 미래에 닥칠 규모 확장 요구에 어떻게 대처할 것인지에 대한 주제도 좋다.

### 해야할 것

- 질문을 통해 확인할 것
- 문제의 요구사항을 이행할 것
- 정답이나 최선의 답안은 없다는 점을 명심할 것
- 면접관이 여러분의 사고 흐름을 이해할 수 있도록 할 것(면접관가 소통하라)
- 가능하다면 여러 해법을 함께 제시할 것
- 개략적 설계에 면접관의 동의하면 세부사항을 설명할 것
- 면접관의 아이디어를 이끌어 낼 것
- 포기하지 말것

### 시간 배분

- 1단계 - 문제 이해 및 설계 범위 확정: 3~10분
- 2단계 - 개략적 설계안 제시 및 동의 구하기: 10~15분
- 3단계 - 상세 설계: 10~25분
- 4단계 - 마무리: 3~5분