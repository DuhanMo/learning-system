## 6장. 영속성 어댑터 구현하기

### 의존성 역전
- 애플리케이션 서비스에서는 영속성 기능을 사용하기 위해 포트 인터페이스를 호출
- 컴파일 단계 의존성은 어댑터에서 코어쪽으로 흐르지만, 런타임에서는 코어에서 어댑터로 흐른다

### 영속성 어댑터의 책임
1. 입력을 받는다
2. 입력을 데이터베이스 포맷으로 매핑한다
3. 데이터베이스 출력을 애플리케이션 포맷으로 매핑한다 
4. 출력을 반환한다

### 포트 인터페이스 나누기
- 특정 엔티티가 필요로 하는 모든 데이터베이스 연산을 하나의 리포지토리 인터페이스에 넣어두면 각 서비스는 넓은 포트 인터페이스에 의존성을 갖는다
  - 이는 불필요한 의존성이다
- 모든 상황에 포트 하나당 하나의 메서드를 적용하지는 못한다. 응집성 높고 함께 사용되는 것들을 인터페이스에 두어야 할 수 있기 때문이다

### 영속성 어댑터 나누기
- 애그리거트당 하나의 영속성 어댑터 접근 방식은 추후 바운디드 컨텍스트의 영속성 요구사항을 분리하기 위한 좋은 토대이다