## 2장. 의존성 역전하기

### 단일 책임 원칙
- `하나의 컴포넌트는 오로지 한 가지 일만 수행 해야 한다` -> `컴포넌트를 변경하는 이유는 오직 하나 뿐이어야 한다`
- **많은 코드**는 **단일 책임 원칙을 위반**한다
  - 따라서 시간이 갈수록 변경이 더 어려워지고 변경 비용이 증가한다

### 의존성 역전 원칙
- **계층형** 아키텍처에서 계층 간 **의존성은 항상 다음 계층인 아래 방향**을 가리킨다
  - 따라서 영속성 계층에 대한 도메인 계층의 의존성 때문에, 영속성 계층을 변경할 때마다 잠재적으로 도메인 계층도 변경해야 한다
- `고수준 모듈은 저수준 모듈에 의존하면 안 되며, 둘 다 추상화(인터페이스, 추상 클래스)에 의존해야 한다` (일반적 DIP)
- `코드상의 어떤 의존성이든 그 방향을 바꿀 수(역전시킬 수) 있다` (책에 설명된 DIP)

### 클린 아키텍처
- 로버트 C.마틴의 정립
  > 설계가 비즈니스 규칙의 테스트를 용이하게 하고,  
  > 비즈니스 규칙은 프레임워크, 데이터베이스, UI 기술, 그 밖의 외부 애플리케이션이나 인터페이스로부터 독립적일 수 있다
- 도메인 코드가 바깥으로 향하는 어떤 의존성도 없어야 한다
- 클린 아키텍처를 사용하면 치러야 하는 대가
  - 도메인 계층이 영속성이나 UI 계층과 철저히 분리되어야 하므로 애플리케이션 엔티티 모델을 각 계층에서 유지보수 해야한다

### 육각형 아키텍처(헥사고날 아키텍처)
- 클린 아키텍처의 구체적인 버전
- 애플리케이션 코어가 육각형으로 표현되어있다
- 시스템이나 어댑터와 연결되는 면이 4개 이상일 수 있기에 표현한 단어이다
- 육각형 안에는 도메인 엔티티와 이와 상호작용하는 유스케이스가 존재한다
- 육각형 밖에는 애플리케이션과 상호작용하는 다양한 어댑터가 존재한다 (웹 어댑터, 외부 시스템 어댑터, 데이터베이스 어댑터,..)
- 왼쪽 어댑터는 어플리케이션을 주도하는 어댑터이다 (애플리케이션 코어를 호출하기 때문)
- 오른쪽 어댑더는 주도되는 어댑터이다 (애플리케이션 코어어에 의해 호출되기 때문)
- 어댑터들 간 통신이 가능하게 하기 위해 애플리케이션 코어가 각각의 포트를 제공해야한다