## 1장. 계층형 아키텍처의 문제는 무엇일까?

### 1. 계층형 아키텍처는 데이터베이스 주도 설계를 유도한다
- 일반적으로 데이터베이스의 구조를 먼저 생각하고 이를 토대로 도메인 로직을 구현한다
- **데이터베이스 중심적인 아키텍처**가 만들어지는 가장 큰 **원인은 ORM 프레임워크를 사용**하기 때문이다
- 데이터베이스 주도 설계는 비즈니스 관점에서 맞지 않는다
- **도메인 로직을 먼저 만들어야 한다**

### 2. 지름길을 택하기 쉬워진다
- 일반적인 계층형 아키텍처의 규칙은 같은 계층이나 아래 계층에만 접근 가능한 것
- 상위 계층에 위치한 컴포넌트에 접근해야 한다면 간단하게 컴포넌트를 아래계층으로 내리면 된다
- 어떤 것을 할 수 있는 선택지가 있다면 누군가는 반드시 그렇게 하고, 깨진 유리창 이론의 시작이 된다
- 계층을 아래로 내릴 수록 영속성 계층에 헬퍼, 리포지토리, 유틸리티가 생기고 도메인 서비스에서 그 클래스들을 참조하게 된다

### 3. 테스트하기 어려워 진다
- 계층을 건너뛰어 웹 계층에서 영속성 계층을 참조한다면?
- 문제1: 도메인 로직을 웹 계층에 구현하게 된다
- 문제2: 웹 계층 테스트 시 영속성까지 목킹해야한다

### 4. 유스케이스를 숨긴다
- 계층형 아키텍처는 **도메인 로직이 여러 계층에 걸쳐 흩어지기 쉽다**
- 계층형 아키텍처는 '너비'에 관한 규칙을 강제하지 않는다
- 따라서 **여러 유스케이스를 커버하는 아주 넓은 서비스가 만들어진다**
- 이는 테스트하기 어려워지고, **작업해야할 유스케이스를 담당하는 서비스를 찾기도 어려워진다**

### 5. 동시 작업이 어려워진다
- 계층형 아키텍처에서는 모든 것이 영속성 계층 위에 만들어진다
- 그래서 특정 기능은 동시에 한 명의 개발자만 작업할 수 있다
- 코드에 넓은 서비스가 있다면 동시 작업 시 병합 충돌의 우려가 존재한다

