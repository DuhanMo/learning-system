# 3장 성능을 좌우하는 DB 설계와 쿼리

## 핵심 요약
- 풀스캔 발생을 고려해야 한다
- 상황에 맞게 인덱스를 설정해야 한다(단일, 복합, 커버링)
- 인덱스는 관리비용이 들기 때문에 과하게 설정하지 않도록 주의한다
- 구조적 개선(미리 집계하거나, 커서기반으로 조회)하여 성능을 개선할 수 있다
- 캐시서버를 두거나 데이터베이스 스케일업을 통해 API성능을 향상할 수 있다

## 주요 개념
- 인덱스
- 커버링 인덱스
- 캐시

## 메모
- 조회범위를 시간기준으로 제한하여 조회성능 개선할 수 있다
- 배치처리를 할 땐 데이터를 나눠서 처리해야한다. 트랜잭션이 DB를 장시간 점유할 수 있기 때문이다
- DB CPU 70%이상일 땐 최대연결개수를 증가시키지 말아야 한다
- DB 테이블 변경은 신중해야한다. 자칫하면 상당한 시간이 소요될 수 있고 서비스가 중지될 수 있다